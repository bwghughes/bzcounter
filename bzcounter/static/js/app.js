// Generated by CoffeeScript 1.4.0
(function() {
  var Tipple, TippleViewModel,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Tipple = (function() {

    function Tipple(id, name, units) {
      this.id = id;
      this.name = name;
      this.units = units;
    }

    return Tipple;

  })();

  TippleViewModel = (function() {

    function TippleViewModel() {
      this.registerClick = __bind(this.registerClick, this);
      this.createdAt = Date.now();
      this.tipples = ko.observableArray([new Tipple('PP', "Pint of Pedi", 3.6), new Tipple('LW', "Large Wine", 3.0), new Tipple('GT', "Gin and Tonic", 2)]);
    }

    TippleViewModel.prototype.registerClick = function(id) {
      var tipple;
      tipple = this.tipples().filter(function(tipple) {
        return tipple.id === id;
      });
      if (!tipple[0].count) {
        tipple[0].count = 0;
      }
      return tipple[0].count++;
    };

    return TippleViewModel;

  })();

  $(function() {
    window.tvm = new TippleViewModel();
    ko.applyBindings(window.tvm);
    $('.add').tap(function() {
      return window.tvm.registerClick(this.id);
    });
    return $('#done').tap(function() {
      return $.ajax('/i/', {
        type: 'POST',
        contentType: 'application/json',
        dataType: 'json',
        data: ko.toJSON(window.tvm),
        success: function(data) {
          return alert('Thanks for being so honest.');
        }
      });
    });
  });

}).call(this);
